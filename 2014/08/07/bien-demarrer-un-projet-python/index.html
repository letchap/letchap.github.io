<!doctype html>
<html class="no-js" lang="en">
  <head>
	<meta charset="utf-8">
	<meta http-equiv="x-ua-compatible" content="ie=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<meta name="author" content="letchap">
	<title>Bien démarrer un projet Python</title>

	<!-- Style -->
	<link rel="stylesheet" href="../../../../theme/css/app.css"/> <!--#TODO changer le path -->

	<!--link rel="stylesheet" href="../../../../theme/css/style.css"/-->
	<link rel="stylesheet" href="../../../../theme/css/pygments.css"/>
    <link rel="stylesheet" href="../../../../theme/css/foundation-icons.css"/>
    <link rel="stylesheet" href="../../../../theme/css/lightbox.css"/>
    <link rel="stylesheet" href="../../../../theme/css/newicons.css"/>
    <!-- Syndication -->
    <link href="/atom.xml" type="application/atom+xml" rel="alternate" title="letchap RSS Feed"/>

    <!-- Google analytics -->


    <script async src="https://www.googletagmanager.com/gtag/js?id=G-K7EEZEDYMT"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'G-K7EEZEDYMT');
    </script>




  </head>

  <body>
  <!--'body'content'here'-->
    <!-- Nav Bar -->
    <nav class="top-bar">
      <div class="top-bar-left">
         <ul class="menu">
           <li class="menu-text">
             <a href="../../../..">Accueil</a>
           </li>
           <li class="menu-text">
            <a href="../../../../pages/a-propos.html">A propos</a>
           </li>
         </ul>
      </div>

      <div class="top-bar-right">
        <ul class="menu">
          <li><a href="../../../../archives.html"><i class="fi-list-thumbnails"></i> Archives</a></li>
          <li><a href="/atom.xml" type="application/atom+xml" rel="subscribe-rss"
               title="Subscribe via RSS"><i class="fi-rss"></i></a></li>

          <form action="https://duckduckgo.com" method="get">
            <div class="grid-container">
              <div class="grid-x grid-padding-x" >
                <div class="medium-9 cell">
                 <input type="search" name="q" placeholder="Search">
                 <input type="hidden" name="sites" value="letchap.github.io" />

                </div>
              </div>
            </div>
          </form>
        </ul>
      </div>
    </nav>
    <!-- Nav Bar -->

    <!-- Header -->
    <header class="callout large" id="myheader">
      <div class="text-left">
                  <h2><a href="../../../..">letchap</a></h2>
      </div>
        <h2><small>du Linux, du Python, un peu de Mac</small></h2>
    </header>
    <!-- Header -->



  <!-- Main Page Content and Sidebar -->
  <section role="main">
    <div class="grid-container">
        <div class="grid-x grid-margin-x grid-margin-y">

        <!-- Main Blog Content -->
        <div class="medium-9 cell">
<section>
  <article>
	<h2><a href="../../../../2014/08/07/bien-demarrer-un-projet-python/" rel="bookmark" title="Permalink to Bien démarrer un projet Python">Bien démarrer un projet Python</a></h2>
	
	<hr />
	<i class="fi-calendar size-14"></i>&nbsp;Thu 07 August 2014&nbsp;&nbsp;
    <i class="fi-price-tag size-14"></i><a href="../../../../category/python.html">&nbsp;Python</a>
	<hr />
	
	<p>Après quelques mois de pratique de Python, je viens enfin de comprendre à quoi servent les environnements virtuels. C'est un peu toujours la même chose. On lit, on expérimente, on ne comprend pas bien pourquoi on fait telle action, et un jour, on a le déclic. Evidemment, j'ai bien lu un peu partout que les environnements virtuels c'est super, que ça permet d'isoler des sources, que cela ne pollue pas le reste du système, etc ... Jusqu'à présent, pour moi, cela ne restait que des mots. Et facta est lux.</p>
<h3>La création d'un projet dans un environnement virtuel avec un dépôt git</h3>
<p>Quelque soit le projet, la méthode que je suis est désormais la suivante :</p>
<ul>
<li>je crée un répertoire</li>
<li>je me positionne dans le répertoire et je crée un dépôt git</li>
<li>je crée un environnement virtuel en choisissant ma version Python</li>
<li>j'exclue les sources et bibliothèques de l'environnement virtuel de mon dépôt</li>
<li>je fais un premier commit de mon dépôt</li>
<li>je peux activer l'environnement virtuel et installer les sources dont j'ai besoin pour travailler</li>
</ul>
<p>Ce qui nous donne :</p>
<div class="codehilite"><pre><span></span><code>$<span class="w"> </span>mkdir<span class="w"> </span>monprojet
$<span class="w"> </span><span class="nb">cd</span><span class="w"> </span>monprojet
$<span class="w"> </span>git<span class="w"> </span>init
$<span class="w"> </span>virtualenv<span class="w"> </span>‐p<span class="w"> </span>python2.7<span class="w"> </span>monprojet-env<span class="w"> </span><span class="c1"># par défaut, version de Python installé sur l&#39;OS</span>
$<span class="w"> </span><span class="nb">echo</span><span class="w"> </span>monprojet-env<span class="w"> </span>&gt;&gt;<span class="w"> </span>.gitignore
$<span class="w"> </span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;*.pyc&quot;</span><span class="w"> </span>&gt;&gt;<span class="w"> </span>.gitignore
$<span class="w"> </span>git<span class="w"> </span>add<span class="w"> </span>.gitignore
$<span class="w"> </span>git<span class="w"> </span>commit<span class="w"> </span>‐m<span class="w"> </span><span class="s2">&quot;Création du projet en ignorant les bibliothèques Python installées&quot;</span>
$<span class="w"> </span><span class="nb">source</span><span class="w"> </span>monprojet-env/bin/activate
$<span class="w"> </span>pip<span class="w"> </span>install<span class="w"> </span>...
</code></pre></div>

<p>Pour sortir d'un environnement virtuel, la commande est <code>deactivate</code>.</p>
<h3>D'accord, mais à quoi ça sert ?</h3>
<p>Première chose, l'environnement virtuel ne va concerner que la bibliothèque standard python dans la version que vous aurez choisi au moment de faire <code>virtualenv</code> et les bibliothèques tierces que vous aurez installé via <code>pip install</code> par exemple. Un petit tour dans le dossier <code>monprojet-env</code> vous permettra de le constater. Ce qui veut dire (ça a l'air évident mais j'avais pas percuté tout de suite), qu'il ne contient rien d'autre, surtout pas les sources de votre projet ou les sources des autres langages de programmation, comme par exemple, au hasard, Ruby.</p>
<p>Et maintenant, place au cas pratique :</p>
<p>Mon site est généré grâce au CMS Pelican écrit en python. Actuellement il est en version 3.4 et tourne en Python 2.7. Les sources de Python et Pelican sont dans un environnement virtuel. Les sources du site sont dans un dépôt git. J'utilise également Ruby et notamment le gem Sass, qui eux sont installés sur le système.</p>
<p>Je veux tester la version 3.4 de Pelican en Python 3.3, sans toucher à l'existant, puis si l'essai est concluant, en faire la version de production.</p>
<p>Les différentes étapes vont être les suivantes :</p>
<ul>
<li>récuperer la liste des bibliothèques tierces installées sur l'environnement virtuel de départ</li>
<li>bien mettre à jour le dépôt avec les sources du site</li>
<li>cloner les sources du site dans un nouveau dossier</li>
<li>créer un nouvel environnement virtuel</li>
<li>y installer Python 3.3, Pelican 3.4 et les autres bibliothèques nécessaires au fonctionnement de Pelican</li>
<li>faire les tests avec ce nouvel environnement, donc sans toucher à l'ancien</li>
<li>si tout est bon, ça devient le nouvel environnement, vous pouvez suprimmer l'ancien</li>
</ul>
<p>Ce qui nous donne</p>
<div class="codehilite"><pre><span></span><code>$<span class="w"> </span><span class="nb">cd</span><span class="w"> </span>blog2.7
$<span class="w"> </span>pip<span class="w"> </span>freeze<span class="w"> </span>&gt;<span class="w"> </span>source.txt
$<span class="w"> </span>virtualenv<span class="w"> </span>‐p<span class="w"> </span>python3.3<span class="w"> </span>pelican3.4-env
$<span class="w"> </span><span class="nb">echo</span><span class="w"> </span>pelican3.4-env<span class="w"> </span>&gt;&gt;<span class="w"> </span>.gitignore
$<span class="w"> </span>git<span class="w"> </span>add<span class="w"> </span>.gitignore
$<span class="w"> </span>git<span class="w"> </span>commit<span class="w"> </span>‐m<span class="w"> </span><span class="s2">&quot;J&#39;exclue les sources python 3.3 du dépôt&quot;</span>
$<span class="w"> </span><span class="nb">source</span><span class="w"> </span>pelican3.4-env/bin/activate
$<span class="w"> </span>pip<span class="w"> </span>install<span class="w"> </span>-r<span class="w"> </span>source.txt
</code></pre></div>

<p>Voilà, il ne reste plus qu'à tester le site sous ce nouvel environnement, et si vous êtes content du résultat, supprimer l'ancien environnement. Si vous n'êtes pas satisfait, il suffit de supprimer le nouvel environnement et d'annuler les modifications dans git.</p>
	
  </article>
  <hr />
	<div class="grid-container">
      <div class="grid-x grid-padding-x">
        <div class="cell large-12">
          <div id="cusdis_thread"
            data-host="https://cusdis.com"
            data-app-id="0e5fe46f-ef6e-4be2-abb1-5abe9211600f"
            data-page-id=""
            data-page-url="pages/{slug}.html"
            data-page-title="">
          </div>
        </div>
      </div>
    </div>
    <script async defer src="https://cusdis.com/js/cusdis.es.js"></script>

</section>
        </div>

        <!-- End Main Content -->
    
        <!-- Sidebar -->
    
        <div class="medium-3 cell">
          <div class="callout large secondary">

		  <h4>Catégories</h4>
		  <ul class="vertical menu">
		    <li><a href="../../../../category/archlinux.html">Archlinux</a></li>
		    <li><a href="../../../../category/conky.html">Conky</a></li>
		    <li><a href="../../../../category/crunchbang.html">Crunchbang</a></li>
		    <li><a href="../../../../category/foundation.html">Foundation</a></li>
		    <li><a href="../../../../category/freebox.html">Freebox</a></li>
		    <li><a href="../../../../category/linux.html">Linux</a></li>
		    <li><a href="../../../../category/lubuntu.html">Lubuntu</a></li>
		    <li><a href="../../../../category/mac-os-x.html">Mac OS X</a></li>
		    <li><a href="../../../../category/mageia.html">Mageia</a></li>
		    <li><a href="../../../../category/microbe.html">Microbe</a></li>
		    <li><a href="../../../../category/misc.html">misc</a></li>
		    <li><a href="../../../../category/octopress.html">Octopress</a></li>
		    <li><a href="../../../../category/openshift.html">Openshift</a></li>
		    <li><a href="../../../../category/pelican.html">Pelican</a></li>
		    <li><a href="../../../../category/python.html">Python</a></li>
		    <li><a href="../../../../category/shell.html">Shell</a></li>
		    <li><a href="../../../../category/terminal.html">Terminal</a></li>
		    <li><a href="../../../../category/virtualbox.html">VirtualBox</a></li>
		  </ul>

		  <h4>Social</h4>
		  <ul class="vertical menu">
		    <li>
			  <a href="https://mastodon.social/@letchap">
			  <i class="icon-mastodon medium"></i> mastodon
			  </a>
			</li>
		    <li>
			  <a href="https://github.com/letchap">
			  <i class="icon-github medium"></i> github
			  </a>
			</li>
		  </ul>

          </div>
	    </div>
      </div>
      <!-- End Sidebar -->
    </div>
 
  <!-- End Main Content and Sidebar -->

  <!-- Footer -->
   <footer>
   <div class="grid-container">
        <div class="grid-x grid-padding-x">

        <div class="cell large-6">
          <p>© Copyright WTFPL</p>
        </div>
        <div class="cell large-6">
            <div class="text-right">

            <a href="http://getpelican.com/">Site généré par Pelican</a>
        </div>
        </div>
      </div>
    </div>
  </footer>
</section> 
  <!-- End Footer -->

    <script src="../../../../theme/js/jquery.js"></script>
<!--    <script src="../../../../theme/js/foundation.min.js"></script>-->
     <script>
        $(document).foundation();
    </script>
	
	<script src="../../../../theme/js/lightbox-2.6.min.js"></script>
  


    <script src="../../../../theme/js/app.js"></script>



  </body>
</html>
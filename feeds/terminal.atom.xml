<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom"><title>letchap - Terminal</title><link href="https://letchap.github.io/" rel="alternate"/><link href="https://letchap.github.io/feeds/terminal.atom.xml" rel="self"/><id>https://letchap.github.io/</id><updated>2013-10-25T16:44:00+02:00</updated><subtitle>du Linux, du Python, un peu de Mac</subtitle><entry><title>Lancer anacron comme simple utilisateur</title><link href="https://letchap.github.io/2013/10/25/lancer-anacron-comme-simple-utilisateur/" rel="alternate"/><published>2013-10-25T16:44:00+02:00</published><updated>2013-10-25T16:44:00+02:00</updated><author><name>letchap</name></author><id>tag:letchap.github.io,2013-10-25:/2013/10/25/lancer-anacron-comme-simple-utilisateur/</id><summary type="html">&lt;p&gt;Sous Linux, il existe un utilitaire qui permet de déclencher des travaux de manière périodique. Il s'agit de cron. Cet utilitaire très pratique présente pour moi un énorme inconvient, il nécessite d'avoir un ordinateur constamment allumé. Heureusement, il existe un deuxième utilitaire anacron qui lui permet de lancer des travaux …&lt;/p&gt;</summary><content type="html">&lt;p&gt;Sous Linux, il existe un utilitaire qui permet de déclencher des travaux de manière périodique. Il s'agit de cron. Cet utilitaire très pratique présente pour moi un énorme inconvient, il nécessite d'avoir un ordinateur constamment allumé. Heureusement, il existe un deuxième utilitaire anacron qui lui permet de lancer des travaux a posteriori si l'ordinateur était éteint au moment du déclenchement programmé. Et là, autre petit soucis, anacron ne se lance qu'en root (contrairement à cron qui se lance en mode utilisateur).&lt;/p&gt;
&lt;p&gt;Heureusement, il est possible de créer un anacron non-root. Pour cela, il faut :&lt;/p&gt;
&lt;h3&gt;1) Créer un fichier anacrontab dans son répertoire personnel par exemple ~/user/etc/anacrontab, à l'image de celui présent dans /etc/anacrontab&lt;/h3&gt;
&lt;div class="codehilite"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="err"&gt;#&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;etc&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="nl"&gt;anacrontab&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;configuration&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;file&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;for&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;anacron&lt;/span&gt;

&lt;span class="err"&gt;#&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;See&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;anacron&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;8&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="ow"&gt;and&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;anacrontab&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;5&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;for&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;details&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;

&lt;span class="n"&gt;SHELL&lt;/span&gt;&lt;span class="o"&gt;=/&lt;/span&gt;&lt;span class="n"&gt;bin&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;sh&lt;/span&gt;
&lt;span class="k"&gt;PATH&lt;/span&gt;&lt;span class="o"&gt;=/&lt;/span&gt;&lt;span class="n"&gt;usr&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="k"&gt;local&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="nl"&gt;sbin&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;usr&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="k"&gt;local&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="nl"&gt;bin&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="nl"&gt;sbin&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="nl"&gt;bin&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;usr&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="nl"&gt;sbin&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;usr&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;bin&lt;/span&gt;

&lt;span class="err"&gt;#&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;These&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nf"&gt;replace&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;cron&lt;/span&gt;&lt;span class="err"&gt;&amp;#39;&lt;/span&gt;&lt;span class="n"&gt;s&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;entries&lt;/span&gt;
&lt;span class="nv"&gt;@monthly&lt;/span&gt;&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="w"&gt;   &lt;/span&gt;&lt;span class="n"&gt;monprog&lt;/span&gt;&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="n"&gt;env&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;DISPLAY&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="err"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;python&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;home&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;letchap&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;bin&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;monprog&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;py&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&amp;gt;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;home&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;letchap&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;tmp&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;monprog&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nf"&gt;log&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&amp;amp;&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;Les 4 champs à renseigner sont :&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;la période : ici, une fois par mois&lt;/li&gt;
&lt;li&gt;le délai : le temps d'attente après le démarrage de l'ordinateur avant de lancer les travaux&lt;/li&gt;
&lt;li&gt;la référence du travail (important pour le timestamp)&lt;/li&gt;
&lt;li&gt;la commande shell à lancer&lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;2) Donner les droits utilisateur sur le répertoire contenant le "compteur" d'anacron, c'est à dire la date de dernière utilisation.&lt;/h3&gt;
&lt;p&gt;Pour cela, nous commençons par créer un group anacron dans /etc/group et nous y ajoutons notre user&lt;/p&gt;
&lt;div class="codehilite"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;$&lt;span class="w"&gt; &lt;/span&gt;addgroup&lt;span class="w"&gt; &lt;/span&gt;anacron
$&lt;span class="w"&gt; &lt;/span&gt;adduser&lt;span class="w"&gt; &lt;/span&gt;user&lt;span class="w"&gt; &lt;/span&gt;anacron
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;Puis nous modifions les droits sur le fichier /var/spool/anacron&lt;/p&gt;
&lt;div class="codehilite"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;$&lt;span class="w"&gt; &lt;/span&gt;chown&lt;span class="w"&gt; &lt;/span&gt;root.anacron&lt;span class="w"&gt; &lt;/span&gt;/var/spool/anacron
$&lt;span class="w"&gt; &lt;/span&gt;chmod&lt;span class="w"&gt; &lt;/span&gt;g+w&lt;span class="w"&gt; &lt;/span&gt;/var/spool/anacron
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;Comme nous sommes dans le groupe anacron, tout va bien.&lt;/p&gt;
&lt;h3&gt;3) Ne reste plus qu'à lancer notre anacron au démarrage de l'ordinateur&lt;/h3&gt;
&lt;p&gt;Cela se fait dans le fichier .profile de l'utlisateur en ajoutant la ligne suivante&lt;/p&gt;
&lt;div class="codehilite"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;/usr/sbin/anacron -t $HOME/etc/anacrontab
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;Pour mémoire, la date à laquelle se déclenche le job mensuel se définie dans le fichier /etc/crontab/.&lt;/p&gt;</content><category term="Terminal"/><category term="cron"/><category term="anacron"/><category term="anacrontab"/><category term="terminal"/></entry><entry><title>Mémo raccourci clavier Unix</title><link href="https://letchap.github.io/2013/07/15/memo-raccourci-clavier-unix/" rel="alternate"/><published>2013-07-15T20:54:00+02:00</published><updated>2013-07-15T20:54:00+02:00</updated><author><name>letchap</name></author><id>tag:letchap.github.io,2013-07-15:/2013/07/15/memo-raccourci-clavier-unix/</id><content type="html">&lt;p&gt;Une petite compilation personnel des raccourcis clavier pour Unix sous une console ou un terminal, &lt;a href="https://letchap.github.io/downloads/raccourciunix.pdf" title="raccourcis unix"&gt;en téléchargement ici&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;&lt;img alt="raccourci unix" src="https://letchap.github.io/images/raccourciunix.png"&gt;&lt;/p&gt;</content><category term="Terminal"/><category term="Terminal"/><category term="Unix"/><category term="raccourci clavier"/><category term="Linux"/></entry><entry><title>Fabriquer une clé live usb depuis n'importe quelle distribution linux</title><link href="https://letchap.github.io/2013/02/20/fabriquer-une-cle-live-usb-depuis-nimporte-quelle-distribution-linux/" rel="alternate"/><published>2013-02-20T20:51:00+01:00</published><updated>2013-02-20T20:51:00+01:00</updated><author><name>letchap</name></author><id>tag:letchap.github.io,2013-02-20:/2013/02/20/fabriquer-une-cle-live-usb-depuis-nimporte-quelle-distribution-linux/</id><summary type="html">&lt;p&gt;J’adore tester de nouvelles distributions Linux, mais j’en ai marre de graver des tonnes de CD. La solution, la clé USB.&lt;/p&gt;
&lt;p&gt;Il existe tout un tas de logiciels, différents selon les distributions pour créer des clés bootables. Trop compliqué pour moi. La solution qui marche sur toutes les …&lt;/p&gt;</summary><content type="html">&lt;p&gt;J’adore tester de nouvelles distributions Linux, mais j’en ai marre de graver des tonnes de CD. La solution, la clé USB.&lt;/p&gt;
&lt;p&gt;Il existe tout un tas de logiciels, différents selon les distributions pour créer des clés bootables. Trop compliqué pour moi. La solution qui marche sur toutes les distributions est hyper simple en 3 commandes dans le terminal : isohybrid, df – h, dd.&lt;/p&gt;
&lt;p&gt;J’ai trouvé l’astuce &lt;a href="http://frederic.bezies.free.fr/blog/?tag=isohybrid" title="Petit truc pour rendre une ISO classique démarrable sur une clé USB"&gt;ici&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;La première étape consiste à formater une clé USB. Evidemment, il faut que la clé soit suffisamment grande pour contenir le fichier .iso. Pour formater la clé USB, démarrer l’utilitaire de disque et formater la clé (en FAT32 ou EXT4, ça marche très bien).&lt;/p&gt;
&lt;p&gt;Nous allons ensuite passé par le terminal :&lt;/p&gt;
&lt;p&gt;Ouvrez une fenêtre de terminal&lt;/p&gt;
&lt;p&gt;Si vous n’êtes pas familier des commandes cd pour se balader dans les répertoires à partir du terminal, vous aurez copié au préalable votre fichier .iso à la racine de votre répertoire personnel.&lt;/p&gt;
&lt;h3&gt;1) Isohybrid&lt;/h3&gt;
&lt;div class="codehilite"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;$&lt;span class="w"&gt; &lt;/span&gt;isohybrid&lt;span class="w"&gt; &lt;/span&gt;image.iso
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;Les fichiers .iso sont plutôt destinés à être gravé sur CD, cette commande permet de copier le fichier .iso en toute sérénité sur la clé USB (de créer une version hybrid de l’image disque).&lt;/p&gt;
&lt;p&gt;Si vous n'avez pas la commande isohybrid, il faut installer syslinux comme ceci (sous Ubuntu ou apparenté)&lt;/p&gt;
&lt;div class="codehilite"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;$&lt;span class="w"&gt; &lt;/span&gt;sudo&lt;span class="w"&gt; &lt;/span&gt;apt-get&lt;span class="w"&gt; &lt;/span&gt;install&lt;span class="w"&gt; &lt;/span&gt;syslinux
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;h3&gt;2) df –h&lt;/h3&gt;
&lt;div class="codehilite"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;$&lt;span class="w"&gt; &lt;/span&gt;df&lt;span class="w"&gt; &lt;/span&gt;-h
Sys.&lt;span class="w"&gt; &lt;/span&gt;de&lt;span class="w"&gt; &lt;/span&gt;fichiers&lt;span class="w"&gt; &lt;/span&gt;Taille&lt;span class="w"&gt; &lt;/span&gt;Utilisé&lt;span class="w"&gt; &lt;/span&gt;Dispo&lt;span class="w"&gt; &lt;/span&gt;Uti%&lt;span class="w"&gt; &lt;/span&gt;Monté&lt;span class="w"&gt; &lt;/span&gt;sur
/dev/sda1&lt;span class="w"&gt;           &lt;/span&gt;37G&lt;span class="w"&gt;     &lt;/span&gt;12G&lt;span class="w"&gt;   &lt;/span&gt;23G&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="m"&gt;35&lt;/span&gt;%&lt;span class="w"&gt; &lt;/span&gt;/
udev&lt;span class="w"&gt;               &lt;/span&gt;241M&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="m"&gt;4&lt;/span&gt;,0K&lt;span class="w"&gt;  &lt;/span&gt;241M&lt;span class="w"&gt;   &lt;/span&gt;&lt;span class="m"&gt;1&lt;/span&gt;%&lt;span class="w"&gt; &lt;/span&gt;/dev
tmpfs&lt;span class="w"&gt;              &lt;/span&gt;100M&lt;span class="w"&gt;    &lt;/span&gt;816K&lt;span class="w"&gt;   &lt;/span&gt;99M&lt;span class="w"&gt;   &lt;/span&gt;&lt;span class="m"&gt;1&lt;/span&gt;%&lt;span class="w"&gt; &lt;/span&gt;/run
none&lt;span class="w"&gt;               &lt;/span&gt;&lt;span class="m"&gt;5&lt;/span&gt;,0M&lt;span class="w"&gt;       &lt;/span&gt;&lt;span class="m"&gt;0&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="m"&gt;5&lt;/span&gt;,0M&lt;span class="w"&gt;   &lt;/span&gt;&lt;span class="m"&gt;0&lt;/span&gt;%&lt;span class="w"&gt; &lt;/span&gt;/run/lock
none&lt;span class="w"&gt;               &lt;/span&gt;248M&lt;span class="w"&gt;     &lt;/span&gt;72K&lt;span class="w"&gt;  &lt;/span&gt;248M&lt;span class="w"&gt;   &lt;/span&gt;&lt;span class="m"&gt;1&lt;/span&gt;%&lt;span class="w"&gt; &lt;/span&gt;/run/shm
/dev/sdb1&lt;span class="w"&gt;         &lt;/span&gt;1004M&lt;span class="w"&gt;    &lt;/span&gt;312M&lt;span class="w"&gt;  &lt;/span&gt;692M&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="m"&gt;32&lt;/span&gt;%&lt;span class="w"&gt; &lt;/span&gt;/media/USB
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;Cela permet de savoir où copier le fichier .iso. En général, cela ressemble à quelque chose comme /dev/sdb ou /dev/sdb1.&lt;/p&gt;
&lt;h3&gt;3) dd&lt;/h3&gt;
&lt;p&gt;Si vous n’êtes jamais entré dans le terminal, je dois vous mettre en garde, cette commande peut être dangereuse. Mal utilisée, elle peut complètement effacer votre disque dur.&lt;/p&gt;
&lt;p&gt;Si vous avez déjà utilisé le terminal, je dois vous mettre en garde, cette commande peut être dangereuse. Mal utilisée, elle peut complètement effacer votre disque dur.&lt;/p&gt;
&lt;p&gt;Ces précautions prises, en fait c’est très simple, il suffit de taper la commande de la manière suivante :&lt;/p&gt;
&lt;div class="codehilite"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;$&lt;span class="w"&gt; &lt;/span&gt;sudo&lt;span class="w"&gt; &lt;/span&gt;dd&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;if&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;image.iso&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nv"&gt;of&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;/dev/sdb
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;Dans le détail :&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;sudo : cela signifie que nous sommes en super utilisateur, il faut donc ensuite taper son mot de passe.&lt;/li&gt;
&lt;li&gt;dd : c’est la commande de copie&lt;/li&gt;
&lt;li&gt;if : cela signifie input file, le fichier en entrée est bien le fichier .iso&lt;/li&gt;
&lt;li&gt;of : cela signifie output file, le fichier en sortie se trouve bien sur la clé USB. Petite astuce super importante : il faut absolument enlever le numéro de /dev/sdb1 en /dev/sdb, sinon ça ne marche pas.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Et nous voyons bien où se trouve le coté dangereux en inversant if et of, on écrase tout avec une clé vide.&lt;/p&gt;
&lt;p&gt;Comme nous avons fait un petit coup d’isohybrid avant, pas de soucis de format au moment de la copie.&lt;/p&gt;
&lt;p&gt;En hop, une clé bootable. Une opération que nous pouvons recommencer à l’infini. Je l'ai testée sur un très grand nombre de distributions, ça marche très bien.&lt;/p&gt;</content><category term="Terminal"/><category term="Boot"/><category term="dd"/><category term="df -h"/><category term="isohybrid"/><category term="Live USB"/><category term="syslinux"/><category term="terminal"/></entry></feed>
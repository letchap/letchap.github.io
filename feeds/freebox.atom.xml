<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom"><title>letchap - Freebox</title><link href="https://letchap.github.io/" rel="alternate"/><link href="https://letchap.github.io/feeds/freebox.atom.xml" rel="self"/><id>https://letchap.github.io/</id><updated>2023-02-15T15:17:00+01:00</updated><subtitle>du Linux, du Python, un peu de Mac</subtitle><entry><title>Monter un disque externe Freebox sur Linux</title><link href="https://letchap.github.io/2023/02/15/monter-un-disque-externe-freebox-sur-linux/" rel="alternate"/><published>2023-02-15T15:17:00+01:00</published><updated>2023-02-15T15:17:00+01:00</updated><author><name>letchap</name></author><id>tag:letchap.github.io,2023-02-15:/2023/02/15/monter-un-disque-externe-freebox-sur-linux/</id><summary type="html">&lt;p&gt;Mon ordinateur a une capacité de stockage du disque dur très limitée. Pour sauvegarder des fichiers, je suis contraint de brancher un disque dur externe, et ce n'est pas très pratique pour un portable.&lt;/p&gt;
&lt;p&gt;Comme je possède une Freebox mini 4K, l'idée va être de brancher un disque externe sur …&lt;/p&gt;</summary><content type="html">&lt;p&gt;Mon ordinateur a une capacité de stockage du disque dur très limitée. Pour sauvegarder des fichiers, je suis contraint de brancher un disque dur externe, et ce n'est pas très pratique pour un portable.&lt;/p&gt;
&lt;p&gt;Comme je possède une Freebox mini 4K, l'idée va être de brancher un disque externe sur la box et de monter le disque sur le PC pour qu'il soit accessible tout le temps, comme un disque interne.&lt;/p&gt;
&lt;p&gt;La première étape consiste à brancher le disque externe sur la freebox et à le formater via l'interface de la freebox. La procédure est expliquée sur &lt;a href="https://assistance.free.fr/articles/freebox-os-formater-mon-disque-dur-ou-mon-peripherique-usb-807"&gt;le site de l'assistance de free&lt;/a&gt;. C'est important de ne pas manquer cette étape, car le disque va être renommé en 'Freebox', ce qui est important pour la suite.&lt;/p&gt;
&lt;p&gt;Pour la suite, tout est très bien expliqué sur &lt;a href="https://alexbacher.fr/unixlinux/acces-disque-freebox-ubuntu/"&gt;le site suivant&lt;/a&gt;. Je ne vais faire que paraphraser.&lt;/p&gt;
&lt;p&gt;Tout d'abord sur l'interface de la freebox, il est nécessaire de cocher les options de partage windows.&lt;/p&gt;
&lt;p&gt;&lt;img alt="interface Freebox" src="https://letchap.github.io/images/interface_freebox.png" title="Interface Freebox"&gt;&lt;/p&gt;
&lt;p&gt;Dans le terminal, on commence par installer le paquet &lt;code&gt;cifs&lt;/code&gt; qui va permettre de dialoguer avec le serveur freebox&lt;/p&gt;
&lt;div class="codehilite"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;sudo apt-get install cifs-utils
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;Comme pour le tutoriel sur &lt;a href="https://letchap.github.io/2023/02/09/transferer-des-donnees-de-liphone-sur-ubuntu/"&gt;le montage de l'iPhone&lt;/a&gt;, on crée un point de montage pour la Freebox :&lt;/p&gt;
&lt;div class="codehilite"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;sudo mkdir /media/Freebox
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;La partie maintenant qui me dérange le plus, il faut créer un fichier de credentials en clair sur le PC. Je pense qu'il doit y avoir une solution plus propre avec &lt;code&gt;pam_mount&lt;/code&gt; mais je n'ai pas encore trouvé la solution.&lt;/p&gt;
&lt;div class="codehilite"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;sudo pluma /home/$USER/.smbcredentials
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;Dans le fichier nouvellement créé, on ajoute les éléments de login :&lt;/p&gt;
&lt;div class="codehilite"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;username=freebox
password=XXXXXXX
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;Puis, on donne les droits sur le fichier :&lt;/p&gt;
&lt;div class="codehilite"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;sudo chmod 777 /home/$USER/.smbcredentials
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;Enfin, pour que le disque monte à chaque redémarrage du PC, il faut ajouter la ligne suivante au fichier &lt;code&gt;fstab&lt;/code&gt;.&lt;/p&gt;
&lt;div class="codehilite"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;sudo pluma /etc/fstab
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;Et on ajoute les lignes suivantes :&lt;/p&gt;
&lt;div class="codehilite"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="gh"&gt;#&lt;/span&gt;mount freebox
//192.168.1.254/Freebox /media/Freebox cifs _netdev,rw,users,credentials=/home/VOTRE_UTILISATEUR/.smbcredentials,iocharset=utf8,uid=1000,sec=ntlmv2,file_mode=0777,dir_mode=0777,vers=2.
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;C'est là qu'il est important d'avoir bien formaté le disque externe via l'interface Freebox, pour que le disque à monter s'appelle bien Freebox à l'adresse 192.168.1.254 (c'est adresse IP de la Freebox, elle peut varier en fonction des box, mais vous pouvez la retrouver dans l'interface / paramètre de la Freebox / mode réseau)&lt;/p&gt;</content><category term="Freebox"/><category term="Freebox"/><category term="Linux"/><category term="cifs"/></entry><entry><title>Transférer des fichiers de Lubuntu vers la freebox HD</title><link href="https://letchap.github.io/2013/02/21/transferer-des-fichiers-de-lubuntu-vers-la-freebox-hd/" rel="alternate"/><published>2013-02-21T20:58:00+01:00</published><updated>2013-02-21T20:58:00+01:00</updated><author><name>letchap</name></author><id>tag:letchap.github.io,2013-02-21:/2013/02/21/transferer-des-fichiers-de-lubuntu-vers-la-freebox-hd/</id><summary type="html">&lt;p&gt;J’adore mon Lubuntu, cependant, il a une petite faiblesse sur les connexions réseau. En natif, le gestionnaire de fichiers PCManFM ne gère ni le FTP ni l’AFP (le protocole de Mac OS X).&lt;/p&gt;
&lt;p&gt;Et sans FTP, c’est compliqué de transférer des fichiers vers la Freebox.&lt;/p&gt;
&lt;p&gt;La première …&lt;/p&gt;</summary><content type="html">&lt;p&gt;J’adore mon Lubuntu, cependant, il a une petite faiblesse sur les connexions réseau. En natif, le gestionnaire de fichiers PCManFM ne gère ni le FTP ni l’AFP (le protocole de Mac OS X).&lt;/p&gt;
&lt;p&gt;Et sans FTP, c’est compliqué de transférer des fichiers vers la Freebox.&lt;/p&gt;
&lt;p&gt;La première étape, bien sûr, c’est d’avoir autorisé les transferts ftp sur la console de la freebox (mais bon, ce n’est pas un blog sur la freebox, c’est expliqué partout all over ze web).&lt;/p&gt;
&lt;p&gt;J’imagine que les solutions décrites sont applicables à la Freebox Revolution, mais comme je suis resté sur l’ancienne box, je n’ai pas pu tester, et puis c’est peut être encore plus simple.&lt;/p&gt;
&lt;h3&gt;1ère solution : ftp dans le terminal&lt;/h3&gt;
&lt;p&gt;En fait, pour moi, ça n’a pas été une solution, trop compliqué. Mais en théorie ça doit marcher. Ce premier test infructueux avec la commande ftp m’a cependant permis de trouver la 2ème solution, à savoir la commande lftp.&lt;/p&gt;
&lt;h3&gt;2ème solution : lftp dans le terminal&lt;/h3&gt;
&lt;p&gt;C’est pareil que ftp, mais en plus simple, et là, j’ai tout compris.&lt;/p&gt;
&lt;p&gt;Ci dessous, tout ce qu'il y a à faire :&lt;/p&gt;
&lt;div class="codehilite"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;$&lt;span class="w"&gt; &lt;/span&gt;lftp&lt;span class="w"&gt; &lt;/span&gt;freebox:@hd1.freebox.fr
lftp&lt;span class="w"&gt; &lt;/span&gt;freebox:@hd1.freebox.fr:~&amp;gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nb"&gt;cd&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;Disque&lt;span class="se"&gt;\ &lt;/span&gt;dur/Video
&lt;span class="nb"&gt;cd&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;ok,&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nv"&gt;cwd&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;/Disque&lt;span class="w"&gt; &lt;/span&gt;dur/Video
lftp&lt;span class="w"&gt; &lt;/span&gt;freebox:@hd1.freebox.fr:/Disque&lt;span class="w"&gt; &lt;/span&gt;dur/Video&amp;gt;&lt;span class="w"&gt; &lt;/span&gt;put&lt;span class="w"&gt; &lt;/span&gt;/adresse/fichier.avi
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;D'abord se connecter à lftp. Si vous avez mis un mot de passe pour la connection lftp à votre freebox, il faut l'ajouter entre ":" et "@".&lt;/p&gt;
&lt;p&gt;Une fois sur le prompt lftp, ce que personnellement j’ai trouvé très simple, c’est de pouvoir se balader dans le répertoire de la Freebox avec les commandes du terminal, en particulier "cd" et le "\" (pour gérer les espaces dans le nom des répertoires). Dans l'exemple, je me suis positionné sur le répertoire Video du Disque dur de la Freebox.&lt;/p&gt;
&lt;p&gt;Pour le transfert du fichier lui-même, il ne reste plus qu’à taper la commande put et de faire un copier – coller du fichier (adresse complète va s'afficher toute seule), le transfert démarre.&lt;/p&gt;
&lt;h3&gt;3ème solution : Filezilla&lt;/h3&gt;
&lt;p&gt;Ze solution. Avec Filezilla, tout est devenu encore plus simple et encore plus rapide.&lt;/p&gt;
&lt;p&gt;Je suis venu à Filezilla par hasard, en créant la première version du blog sous Wordpress. Pour créer un blog avec Wordpress, il est expliqué partout qu’il faut utiliser Filezilla pour faire des transferts FTP du contenu du blog. Ah bon, Filezilla fait du transfert FTP sans peine. Mais pourquoi je m’embête avec la ligne de commande (en fait, je ne m’embête jamais avec la ligne de commande, mais bon, des fois autant aller au plus pratique quand même).&lt;/p&gt;
&lt;p&gt;Sur l’écran d’accueil, il suffit de renseigner les informations comme illustrer ci-dessous :&lt;/p&gt;
&lt;p&gt;&lt;img alt="Connexion Filezilla" src="https://letchap.github.io/images/filezilla.png"&gt;&lt;/p&gt;
&lt;p&gt;La fenêtre de gauche est le navigateur de votre disque dur, celle de droite celle de la Freebox. Déployer le répertoire de la Freebox où vous souhaitez transférer le fichier. Il suffit alors de sélectionner le fichier de votre disque dur à transférer, et de faire un clic droit et de choisir "Envoyer".&lt;/p&gt;
&lt;p&gt;Sur mon PC, c’est beaucoup, beaucoup, beaucoup plus rapide que lftp (transfert entre 1,7 et 2,3 Mo/s chez moi).&lt;/p&gt;
&lt;p&gt;Evidemment, ça fonctionne aussi dans l’autre sens.&lt;/p&gt;
&lt;p&gt;Enfin, les paramètres de la connexion sont sauvegardés dans connexion rapide, donc la 2ème connexion sera très simple.&lt;/p&gt;</content><category term="Freebox"/><category term="Filezilla"/><category term="Freebox HD"/><category term="Freebox V5"/><category term="FTP"/><category term="lftp"/><category term="Lubuntu"/><category term="Réseau"/></entry></feed>